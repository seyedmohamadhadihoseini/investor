{"version":3,"sources":["turbopack:///[project]/src/app/panel/[nationalId]/refferal/ContractDataTable.tsx","turbopack:///[project]/src/app/panel/[nationalId]/refferal/style.module.css [app-ssr] (css module)","turbopack:///[project]/src/app/panel/[nationalId]/refferal/ProfitRecordDataTable.tsx","turbopack:///[project]/src/app/panel/[nationalId]/refferal/server/data:e20034 <text/javascript>"],"sourcesContent":["\"use client\"\r\n\r\nimport DataListComponent from \"@/components/DataTable\";\r\nimport { Contract, Person } from \"@prisma/client\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {  changeReferrerContractId } from \"@/redux/features/panel/panelSlice\";\r\nimport { HeaderType } from \"@/components/DataTable/columns\";\r\nexport default function ContractDataTableReferral({ subPersons }:\r\n    {\r\n        subPersons: ({ investments: Contract[] } & Person)[]\r\n    }) {\r\n\r\n    const dispatch = useDispatch()\r\n    \r\n    let data: HeaderType[] = []\r\n    subPersons.forEach(subPerson => {\r\n\r\n        const subPersonContract = subPerson.investments.map(investment => ({\r\n            _id: investment.id,\r\n            inverstorNationalId: subPerson.nationalId,\r\n            inverstorFullName: subPerson.FullName,\r\n            startDate: investment.contractStartDate.toLocaleDateString(\"fa-ir\"),\r\n            endDate: investment.contractEndDate.toLocaleDateString(\"fa-ir\"),\r\n            profitPeriod: investment.contractProfitPeriod,\r\n            percent: investment.referrerPercentage || \"\",\r\n            amount: investment.investmentAmount.toString(),\r\n            url: \"\"\r\n        }))\r\n        data = [...data, ...subPersonContract]\r\n    })\r\n    return (\r\n        <DataListComponent\r\n            headers={[\r\n                { value: \"inverstorNationalId\", title: \"کد ملی سرمایه گذار\" },\r\n                { value: \"inverstorFullName\", title: \"نام و نام خانوادگی سرمایه گذار\" },\r\n                { value: \"amount\", title: \"سرمایه\" },\r\n                { value: \"percent\", title: \"درصد سود\" },\r\n                { value: \"startDate\", title: \"تاریخ شروع قرارداد\" },\r\n                { value: \"endDate\", title: \"تاریخ پایان قرارداد\" },\r\n                { value: \"profitPeriod\", title: \"دوره بازپرداخت سود(روز)\" },\r\n                { value: \"url\", title: \"url\" },\r\n            ]}\r\n            data={data}\r\n            isShowAddButton={false}\r\n            isShowEditButton={false}\r\n            isShowRemoveButton={false}\r\n            isShowProfile={false}\r\n            editFunction={() => {\r\n\r\n            }}\r\n            addFunction={() => {\r\n\r\n            }}\r\n            removeFunction={async () => {\r\n\r\n            }}\r\n            goProfileFunction={()=>{}}\r\n            onRowClick={(id: string) => {\r\n                dispatch(changeReferrerContractId(id))\r\n            }}\r\n            filters={[\r\n                { title: \"مقدار سرمایه\", columnId: \"amount\" }\r\n            ]}\r\n        />\r\n    );\r\n}","__turbopack_context__.v({\n  \"container\": \"style-module__jk64RG__container\",\n  \"profit-record\": \"style-module__jk64RG__profit-record\",\n});\n","\"use client\"\r\n\r\nimport DataListComponent from \"@/components/DataTable\";\r\nimport { setDialogObjectId, SetDialogOpen, SetDialogType } from \"@/redux/features/dialog/dialogSlice\";\r\nimport { ProfitRecord } from \"@prisma/client\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { GetProfitRecords } from \"./server\";\r\n\r\nimport { RootState } from \"@/redux/store\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { GetDayDiff } from \"@/lib/date/timediff\";\r\n\r\nimport style from \"./style.module.css\"\r\n\r\nexport default function ProfitRecordDataTableInvestor() {\r\n    const [profitRecords, setProfitRecords] = useState<ProfitRecord[]>([]);\r\n    const contractId = useSelector((state: RootState) => state.panel.referrerContractId);\r\n    const containerRef = useRef<HTMLDivElement | null>(null);\r\n    const forceUpdate = useSelector((state:RootState)=>state.panel.ForceUpdate)\r\n    useEffect(() => {\r\n        GetProfitRecords(contractId).then(data => {\r\n            setProfitRecords(data)\r\n            setTimeout(() => {\r\n                containerRef.current?.scrollIntoView();\r\n\r\n            }, 500);\r\n        });\r\n    }, [contractId,forceUpdate])\r\n    const dispatch = useDispatch()\r\n    \r\n    if (profitRecords.length == 0) {\r\n        return <div></div>\r\n    }\r\n    const data = profitRecords.map(profit => ({\r\n        _id: profit.id,\r\n        paymentDate: profit.paymentDate.toLocaleDateString(\"fa-ir\"),\r\n        profitAmount: profit.profitAmount,\r\n        dayReminds: GetDayDiff(new Date(), profit.paymentDate),\r\n        isPaid: profit.isPaid ? \"بله\" : \"خیر\",\r\n        url: \"\"\r\n    }))\r\n    return (\r\n        <div ref={containerRef} className={style[\"profit-record\"]}>\r\n            <DataListComponent\r\n\r\n                headers={[\r\n                    { value: \"paymentDate\", title: \"تاریخ سررسید\" },\r\n                    { value: \"profitAmount\", title: \"سود\" },\r\n                    { value: \"dayReminds\", title: \"مانده(روز)\" },\r\n                    { value: \"isPaid\", title: \"آیا پرداخت شده\" },\r\n                    { value: \"url\", title: \"url\" },\r\n                ]}\r\n                data={data}\r\n                isShowAddButton={false}\r\n                isShowEditButton\r\n                isShowRemoveButton={false}\r\n                isShowProfile={false}\r\n                editFunction={(profitId: string) => {\r\n                    dispatch(SetDialogOpen(true));\r\n                    dispatch(SetDialogType(\"EDIT_REFERRER_PROFIT_RECORD\"));\r\n                    dispatch(setDialogObjectId(profitId));\r\n                }}\r\n                addFunction={() => {\r\n                }}\r\n                removeFunction={async (profitId: string) => {\r\n                    \r\n                }}\r\n                goProfileFunction={()=>{}}\r\n                onRowClick={() => {\r\n\r\n                }}\r\n                filters={[]}\r\n            />\r\n            <div ></div>\r\n        </div>\r\n    );\r\n}","/* __next_internal_action_entry_do_not_use__ [{\"40ccebcca98c913d1f92c617c4476ff4b0e17366d8\":\"GetProfitRecords\"},\"src/app/panel/[nationalId]/refferal/server/index.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var GetProfitRecords=/*#__PURE__*/createServerReference(\"40ccebcca98c913d1f92c617c4476ff4b0e17366d8\",callServer,void 0,findSourceMapURL,\"GetProfitRecords\");"],"names":[],"mappings":"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"}